{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\blelm\\\\Desktop\\\\AppCreate\\\\habitPlan\\\\src\\\\components\\\\test\\\\firebaseTest\\\\FirebaseAuthComponent.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { firebase } from \"./firebaseTest\";\nimport { login } from \"../../../modules/userModule\";\nimport { useSelector, useDispatch } from \"react-redux\";\n// ログイン、ログアウトボタン実装\nexport default function FirebaseAuthComponent() {\n  _s();\n\n  var loggedin = useFirebaseLogin(); // console.log('loggedin');\n  // console.log(loggedin);\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      userId = _useSelector.userId;\n\n  if (!loggedin) {\n    // ログインしていなければログインボタンを表示\n    return __jsx(\"button\", {\n      onClick: function onClick() {\n        return signInWithPopup();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 16\n      }\n    }, \"\\u30ED\\u30B0\\u30A4\\u30F3\");\n  }\n\n  firebase.auth().onAuthStateChanged(function (user) {\n    // ユーザ情報が取れればログイン状態\n    console.log(\"===========user===========\");\n    var userIdCheck;\n    !!user ? userIdCheck = user.uid : userIdCheck = \"\"; // これをreduxで管理する\n\n    dispatch(login(userIdCheck));\n    console.log('userId');\n    console.log(userId);\n  }); // ログインしているならログアウトボタンを表示\n\n  return __jsx(\"button\", {\n    onClick: function onClick() {\n      return signOut();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }\n  }, \"\\u30ED\\u30B0\\u30A2\\u30A6\\u30C8\");\n} // ログイン処理\n\n_s(FirebaseAuthComponent, \"PxJvGXX4l7B2+t7bqaSrPV1qD4E=\", false, function () {\n  return [useFirebaseLogin, useDispatch, useSelector];\n});\n\n_c = FirebaseAuthComponent;\n\nvar signInWithPopup = function signInWithPopup() {\n  // Googleプロバイダオブジェクトのインスタンスを作成\n  var googleAuthProvider = new firebase.auth.GoogleAuthProvider(); // 別タブでログイン画面に飛ばしたいため、signInWithPopupを使う\n  // リダイレクトでログイン画面に飛ばしたい場合はsignInWithRedirectを使う\n\n  return firebase.auth().signInWithPopup(googleAuthProvider);\n}; // ログアウト処理\n\n\nvar signOut = function signOut() {\n  // signOutを呼び出すだけでOK\n  return firebase.auth().signOut();\n}; // ログインしているかチェックするカスタムフックを作る\n\n\nvar useFirebaseLogin = function useFirebaseLogin() {\n  _s2();\n\n  // stateでログイン状態を保持\n  var _useState = useState(false),\n      loggedin = _useState[0],\n      setLoggedin = _useState[1];\n\n  var dispatch = useDispatch();\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      userId = _useSelector2.userId;\n\n  useEffect(function () {\n    // 現在ログインしているユーザを取得\n    firebase.auth().onAuthStateChanged(function (user) {\n      // ユーザ情報が取れればログイン状態\n      // console.log('user');\n      // let userIdCheck:string;\n      // !!user ? userIdCheck = user.uid : userIdCheck = '';\n      // // これをreduxで管理する\n      // dispatch(login(userIdCheck));\n      // console.log(userId);\n      setLoggedin(!!user);\n    });\n  }, []); // ログイン情報を返却\n\n  return loggedin;\n};\n\n_s2(useFirebaseLogin, \"rgdo3XeFtFNNHokaoS15kIoZGEc=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"FirebaseAuthComponent\");","map":{"version":3,"sources":["C:/Users/blelm/Desktop/AppCreate/habitPlan/src/components/test/firebaseTest/FirebaseAuthComponent.tsx"],"names":["React","useState","useEffect","firebase","login","useSelector","useDispatch","FirebaseAuthComponent","loggedin","useFirebaseLogin","dispatch","state","user","userId","signInWithPopup","auth","onAuthStateChanged","console","log","userIdCheck","uid","signOut","googleAuthProvider","GoogleAuthProvider","setLoggedin"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,KAAT,QAAsB,6BAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAGA;AACA,eAAe,SAASC,qBAAT,GAAiC;AAAA;;AAC5C,MAAMC,QAAQ,GAAGC,gBAAgB,EAAjC,CAD4C,CAE5C;AACA;;AAEA,MAAMC,QAAQ,GAAGJ,WAAW,EAA5B;;AAL4C,qBAOzBD,WAAW,CAAC,UAACM,KAAD;AAAA,WAAsBA,KAAK,CAACC,IAA5B;AAAA,GAAD,CAPc;AAAA,MAOpCC,MAPoC,gBAOpCA,MAPoC;;AAS5C,MAAI,CAACL,QAAL,EAAe;AACX;AACA,WAAO;AAAQ,MAAA,OAAO,EAAE;AAAA,eAAMM,eAAe,EAArB;AAAA,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAP;AACH;;AACDX,EAAAA,QAAQ,CAACY,IAAT,GAAgBC,kBAAhB,CAAmC,UAACJ,IAAD,EAAU;AACzC;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA,QAAIC,WAAJ;AACA,KAAC,CAACP,IAAF,GAAUO,WAAW,GAAGP,IAAI,CAACQ,GAA7B,GAAqCD,WAAW,GAAG,EAAnD,CAJyC,CAKzC;;AACAT,IAAAA,QAAQ,CAACN,KAAK,CAACe,WAAD,CAAN,CAAR;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AACH,GATD,EAb4C,CAuB5C;;AACA,SAAO;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAMQ,OAAO,EAAb;AAAA,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP;AACH,C,CAED;;GA3BwBd,qB;UACHE,gB,EAIAH,W,EAEED,W;;;KAPCE,qB;;AA4BxB,IAAMO,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1B;AACA,MAAMQ,kBAAkB,GAAG,IAAInB,QAAQ,CAACY,IAAT,CAAcQ,kBAAlB,EAA3B,CAF0B,CAG1B;AACA;;AACA,SAAOpB,QAAQ,CAACY,IAAT,GAAgBD,eAAhB,CAAgCQ,kBAAhC,CAAP;AACH,CAND,C,CAQA;;;AACA,IAAMD,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB;AACA,SAAOlB,QAAQ,CAACY,IAAT,GAAgBM,OAAhB,EAAP;AACH,CAHD,C,CAKA;;;AACA,IAAMZ,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAAA;;AAC3B;AAD2B,kBAEKR,QAAQ,CAAC,KAAD,CAFb;AAAA,MAEpBO,QAFoB;AAAA,MAEVgB,WAFU;;AAG3B,MAAMd,QAAQ,GAAGJ,WAAW,EAA5B;;AAH2B,sBAKRD,WAAW,CAAC,UAACM,KAAD;AAAA,WAAsBA,KAAK,CAACC,IAA5B;AAAA,GAAD,CALH;AAAA,MAKnBC,MALmB,iBAKnBA,MALmB;;AAO3BX,EAAAA,SAAS,CAAC,YAAM;AACZ;AACAC,IAAAA,QAAQ,CAACY,IAAT,GAAgBC,kBAAhB,CAAmC,UAACJ,IAAD,EAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AAEAY,MAAAA,WAAW,CAAC,CAAC,CAACZ,IAAH,CAAX;AACH,KAVD;AAWH,GAbQ,EAaN,EAbM,CAAT,CAP2B,CAqB3B;;AACA,SAAOJ,QAAP;AACH,CAvBD;;IAAMC,gB;UAGeH,W,EAEED,W","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { firebase } from \"./firebaseTest\";\r\nimport { login } from \"../../../modules/userModule\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"../../../modules/rootReducer\";\r\n\r\n// ログイン、ログアウトボタン実装\r\nexport default function FirebaseAuthComponent() {\r\n    const loggedin = useFirebaseLogin();\r\n    // console.log('loggedin');\r\n    // console.log(loggedin);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { userId } = useSelector((state: RootState) => state.user);\r\n\r\n    if (!loggedin) {\r\n        // ログインしていなければログインボタンを表示\r\n        return <button onClick={() => signInWithPopup()}>ログイン</button>;\r\n    }\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n        // ユーザ情報が取れればログイン状態\r\n        console.log(\"===========user===========\");\r\n        let userIdCheck: string;\r\n        !!user ? (userIdCheck = user.uid) : (userIdCheck = \"\");\r\n        // これをreduxで管理する\r\n        dispatch(login(userIdCheck));\r\n        console.log('userId');\r\n        console.log(userId);\r\n    });\r\n    // ログインしているならログアウトボタンを表示\r\n    return <button onClick={() => signOut()}>ログアウト</button>;\r\n}\r\n\r\n// ログイン処理\r\nconst signInWithPopup = () => {\r\n    // Googleプロバイダオブジェクトのインスタンスを作成\r\n    const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\r\n    // 別タブでログイン画面に飛ばしたいため、signInWithPopupを使う\r\n    // リダイレクトでログイン画面に飛ばしたい場合はsignInWithRedirectを使う\r\n    return firebase.auth().signInWithPopup(googleAuthProvider);\r\n};\r\n\r\n// ログアウト処理\r\nconst signOut = () => {\r\n    // signOutを呼び出すだけでOK\r\n    return firebase.auth().signOut();\r\n};\r\n\r\n// ログインしているかチェックするカスタムフックを作る\r\nconst useFirebaseLogin = () => {\r\n    // stateでログイン状態を保持\r\n    const [loggedin, setLoggedin] = useState(false);\r\n    const dispatch = useDispatch();\r\n\r\n    const { userId } = useSelector((state: RootState) => state.user);\r\n\r\n    useEffect(() => {\r\n        // 現在ログインしているユーザを取得\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n            // ユーザ情報が取れればログイン状態\r\n            // console.log('user');\r\n            // let userIdCheck:string;\r\n            // !!user ? userIdCheck = user.uid : userIdCheck = '';\r\n            // // これをreduxで管理する\r\n            // dispatch(login(userIdCheck));\r\n            // console.log(userId);\r\n\r\n            setLoggedin(!!user);\r\n        });\r\n    }, []);\r\n    // ログイン情報を返却\r\n    return loggedin;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}